import{j as r}from"./jsx-runtime-CkxqCPlQ.js";import{r as i}from"./index-DJO9vBfz.js";import{L as H}from"./LetterGrid-B1oK-kRr.js";import{W as F}from"./WordInput-kbaP5xRq.js";import{T as V}from"./ThemeToggle-BRquVV1q.js";import{S as q}from"./Statistics-rCnpW1qT.js";import{T as z}from"./Toast-BDZF9BDc.js";import"./WordLine-Gf6g96i7.js";import"./ColorTile-CB4WjyZ3.js";const B="/words";class K{async get(u,s){try{const o=await fetch(u,{...s});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o}catch(o){if(o instanceof Error&&o.name==="AbortError")return new Response(JSON.stringify([]));throw o}}async post(u,s){try{const o=await fetch(u,{method:"POST",...s});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o}catch(o){if(o instanceof Error&&o.name==="AbortError")return new Response(JSON.stringify([]));throw o}}}const Q=new K,G=()=>{const[m,u]=i.useState([]),[s,o]=i.useState(""),[d,j]=i.useState([]),[h,g]=i.useState(!1),[U,N]=i.useState(!1),[T,I]=i.useState({}),[O,C]=i.useState([]),[w,x]=i.useState(""),S=s.length||5,p=6,b=(e,n)=>{const t=Date.now();C(c=>[...c,{id:t,message:e,type:n}])},D=e=>{C(n=>n.filter(t=>t.id!==e))},E=(e,n)=>{const t=JSON.parse(localStorage.getItem("gameStats")||'{"gamesPlayed":0,"gamesWon":0,"currentStreak":0,"maxStreak":0,"guessDistribution":[0,0,0,0,0,0]}');t.gamesPlayed++,e?(t.gamesWon++,t.currentStreak++,t.maxStreak=Math.max(t.maxStreak,t.currentStreak),t.guessDistribution[n-1]++):t.currentStreak=0,localStorage.setItem("gameStats",JSON.stringify(t))},R=()=>{const e=Math.floor(Math.random()*m.length),n=m[e];n&&o(n)};i.useEffect(()=>{const e=new AbortController;let n=!0;return(async()=>{try{const a=await(await Q.get(B,{signal:e.signal})).json();if(n&&a.length>0){const l=Math.floor(Math.random()*a.length);u(a),o(a[l])}}catch(c){c instanceof Error&&c.name!=="AbortError"&&console.error("Error fetching words:",c)}})(),()=>{n=!1,e.abort()}},[]),i.useCallback(e=>{const n=s.split(""),c=e.split("").map((a,l)=>{let f="base";return a===n[l]?h?f="info":f="success":s.indexOf(a)>=0?f="warning":f="neutral",{char:a,color:f}});c.length&&j(a=>[...a,c])},[s,h]),i.useEffect(()=>{s.length>0&&(d.length===p||w===s)&&g(!0)},[w,d,s]);const _=i.useCallback(e=>{if(e.length!==S){b(`Word must be ${S} letters long`,"error");return}if(!m.includes(e.toLowerCase())){b("Not in word list","error");return}const n=[],t={...T};for(let c=0;c<e.length;c++){const a=e[c].toLowerCase();let l="neutral";a===s[c]?l="success":s.includes(a)&&(l="warning"),(!t[a]||l==="success"||l==="warning"&&t[a]==="neutral")&&(t[a]=l),n.push({char:a,color:l})}I(t),j(c=>[...c,n]),e.toLowerCase()===s?(g(!0),E(!0,d.length+1),b("Congratulations!","success"),setTimeout(()=>N(!0),1500)):d.length+1>=p&&(g(!0),E(!1,p),b(`Game Over! The word was ${s}`,"error"),setTimeout(()=>N(!0),1500))},[s,m,d.length,T,p]),J=()=>{g(!0),x(s)},$=()=>{x(""),j([]),g(!1),R()};return r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 min-h-screen flex flex-col",children:[r.jsxs("header",{className:"border-b border-[#d4c5b3] dark:border-dark-tile-border pb-4 flex justify-between items-center",children:[r.jsx("div",{className:"w-10"})," ",r.jsx("h1",{className:"text-3xl font-bold text-center",children:"Wordle"}),r.jsx(V,{})]}),r.jsxs("div",{className:"flex-grow flex flex-row",children:[r.jsxs("div",{className:"flex-1 flex flex-col gap-8 pt-8 pr-12 min-w-0",children:[r.jsx(H,{lines:d,cols:S,rows:p}),r.jsxs("div",{className:"space-y-8",children:[r.jsx(F,{value:w,onChange:x,onSubmit:()=>{_(w),x("")},maxLength:S,disabled:h}),r.jsx("div",{className:"flex flex-col items-center gap-4 mb-4",children:h?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-lg font-medium",children:["Solution: ",r.jsx("span",{className:"text-wordle-correct",children:s})]}),r.jsx("button",{className:`px-6 py-2.5 bg-wordle-absent text-white rounded-lg 
                              hover:bg-opacity-90 transition-colors font-medium
                              focus:outline-none focus:ring-2 focus:ring-wordle-absent focus:ring-opacity-50`,onClick:$,children:"Play Again"})]}):r.jsx("button",{className:`px-6 py-2.5 bg-wordle-correct text-white rounded-lg 
                            hover:bg-opacity-90 transition-colors font-medium
                            focus:outline-none focus:ring-2 focus:ring-wordle-correct focus:ring-opacity-50`,onClick:J,children:"Show Solution"})})]})]}),r.jsx("div",{className:"hidden md:block w-[360px] min-w-[360px] border-l border-[#d4c5b3] dark:border-dark-border pl-8 pt-8",children:r.jsx(q,{})})]}),O.map(e=>r.jsx(z,{message:e.message,type:e.type,onClose:()=>D(e.id)},e.id))]})};G.__docgenInfo={description:"",methods:[],displayName:"GamePage"};const ne={title:"Pages/GamePage",component:G,parameters:{componentSubtitle:"Main game page component",layout:"fullscreen"},argTypes:{className:{control:"text",description:"Additional CSS classes",table:{type:{summary:"string"},defaultValue:{summary:"''"}}}}},y={args:{},parameters:{docs:{description:{story:"Main game page with default settings."}}}},k={args:{},parameters:{backgrounds:{default:"dark"},docs:{description:{story:"Main game page in dark theme."}}}};var v,A,L;y.parameters={...y.parameters,docs:{...(v=y.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {},
  parameters: {
    docs: {
      description: {
        story: 'Main game page with default settings.'
      }
    }
  }
}`,...(L=(A=y.parameters)==null?void 0:A.docs)==null?void 0:L.source}}};var P,W,M;k.parameters={...k.parameters,docs:{...(P=k.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {},
  parameters: {
    backgrounds: {
      default: 'dark'
    },
    docs: {
      description: {
        story: 'Main game page in dark theme.'
      }
    }
  }
}`,...(M=(W=k.parameters)==null?void 0:W.docs)==null?void 0:M.source}}};const ce=["Default","DarkTheme"];export{k as DarkTheme,y as Default,ce as __namedExportsOrder,ne as default};
