import{j as s}from"./jsx-runtime-CkxqCPlQ.js";import{r as i}from"./index-DJO9vBfz.js";import{L as H}from"./LetterGrid-DJTzK9QP.js";import{W as F}from"./WordInput-BFtXSD23.js";import{T as V}from"./ThemeToggle-BRquVV1q.js";import{S as q}from"./Statistics-rCnpW1qT.js";import{T as z}from"./Toast-BDZF9BDc.js";import"./WordLine-sPSBJFAh.js";import"./ColorTile-r3Qg_vxC.js";const B="/words";class K{async get(u,r){try{const o=await fetch(u,{...r});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o}catch(o){if(o instanceof Error&&o.name==="AbortError")return new Response(JSON.stringify([]));throw o}}async post(u,r){try{const o=await fetch(u,{method:"POST",...r});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o}catch(o){if(o instanceof Error&&o.name==="AbortError")return new Response(JSON.stringify([]));throw o}}}const Q=new K,M=()=>{const[m,u]=i.useState([]),[r,o]=i.useState(""),[d,b]=i.useState([]),[h,p]=i.useState(!1),[U,k]=i.useState(!1),[j,I]=i.useState({}),[O,N]=i.useState([]),[T,C]=i.useState(""),y=r.length||5,f=6,w=(e,n)=>{const t=Date.now();N(c=>[...c,{id:t,message:e,type:n}])},D=e=>{N(n=>n.filter(t=>t.id!==e))},E=(e,n)=>{const t=JSON.parse(localStorage.getItem("gameStats")||'{"gamesPlayed":0,"gamesWon":0,"currentStreak":0,"maxStreak":0,"guessDistribution":[0,0,0,0,0,0]}');t.gamesPlayed++,e?(t.gamesWon++,t.currentStreak++,t.maxStreak=Math.max(t.maxStreak,t.currentStreak),t.guessDistribution[n-1]++):t.currentStreak=0,localStorage.setItem("gameStats",JSON.stringify(t))},R=()=>{const e=Math.floor(Math.random()*m.length),n=m[e];n&&o(n)};i.useEffect(()=>{const e=new AbortController;let n=!0;return(async()=>{try{const a=await(await Q.get(B,{signal:e.signal})).json();if(n&&a.length>0){const l=Math.floor(Math.random()*a.length);u(a),o(a[l])}}catch(c){c instanceof Error&&c.name!=="AbortError"&&console.error("Error fetching words:",c)}})(),()=>{n=!1,e.abort()}},[]),i.useCallback(e=>{const n=r.split(""),c=e.split("").map((a,l)=>{let g="base";return a===n[l]?h?g="info":g="success":r.indexOf(a)>=0?g="warning":g="neutral",{char:a,color:g}});c.length&&b(a=>[...a,c])},[r,h]),i.useEffect(()=>{r.length>0&&(d.length===f||T===r)&&p(!0)},[T,d,r]);const _=i.useCallback(e=>{if(e.length!==y){w(`Word must be ${y} letters long`,"error");return}if(!m.includes(e.toLowerCase())){w("Not in word list","error");return}const n=[],t={...j};for(let c=0;c<e.length;c++){const a=e[c].toLowerCase();let l="neutral";a===r[c]?l="success":r.includes(a)&&(l="warning"),(!t[a]||l==="success"||l==="warning"&&t[a]==="neutral")&&(t[a]=l),n.push({char:a,color:l})}I(t),b(c=>[...c,n]),e.toLowerCase()===r?(p(!0),E(!0,d.length+1),w("Congratulations!","success"),setTimeout(()=>k(!0),1500)):d.length+1>=f&&(p(!0),E(!1,f),w(`Game Over! The word was ${r}`,"error"),setTimeout(()=>k(!0),1500))},[r,m,d.length,j,f]),J=()=>{p(!0),C(r)},$=()=>{C(""),b([]),p(!1),R()};return s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 min-h-screen flex flex-col",children:[s.jsxs("header",{className:"border-b border-[#d4c5b3] dark:border-dark-tile-border pb-4 flex justify-between items-center",children:[s.jsx("div",{className:"w-10"})," ",s.jsx("h1",{className:"text-3xl font-bold text-center",children:"Wordle"}),s.jsx(V,{})]}),s.jsxs("div",{className:"flex-grow flex flex-row",children:[s.jsxs("div",{className:"flex-1 flex flex-col gap-8 pt-8 pr-12 min-w-0",children:[s.jsx(H,{lines:d,cols:y,rows:f}),s.jsxs("div",{className:"space-y-8",children:[s.jsx(F,{onGuess:e=>_(e),disabled:h}),s.jsx("div",{className:"flex flex-col items-center gap-4 mb-4",children:h?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-lg font-medium",children:["Solution: ",s.jsx("span",{className:"text-wordle-correct",children:r})]}),s.jsx("button",{className:`px-6 py-2.5 bg-wordle-absent text-white rounded-lg 
                              hover:bg-opacity-90 transition-colors font-medium
                              focus:outline-none focus:ring-2 focus:ring-wordle-absent focus:ring-opacity-50`,onClick:$,children:"Play Again"})]}):s.jsx("button",{className:`px-6 py-2.5 bg-wordle-correct text-white rounded-lg 
                            hover:bg-opacity-90 transition-colors font-medium
                            focus:outline-none focus:ring-2 focus:ring-wordle-correct focus:ring-opacity-50`,onClick:J,children:"Show Solution"})})]})]}),s.jsx("div",{className:"hidden md:block w-[360px] min-w-[360px] border-l border-[#d4c5b3] dark:border-dark-border pl-8 pt-8",children:s.jsx(q,{})})]}),O.map(e=>s.jsx(z,{message:e.message,type:e.type,onClose:()=>D(e.id)},e.id))]})};M.__docgenInfo={description:"",methods:[],displayName:"GamePage"};const ne={title:"Pages/GamePage",component:M,parameters:{componentSubtitle:"Main game page component",layout:"fullscreen"},argTypes:{className:{control:"text",description:"Additional CSS classes",table:{type:{summary:"string"},defaultValue:{summary:"''"}}}}},x={args:{},parameters:{docs:{description:{story:"Main game page with default settings."}}}},S={args:{},parameters:{backgrounds:{default:"dark"},docs:{description:{story:"Main game page in dark theme."}}}};var v,A,P;x.parameters={...x.parameters,docs:{...(v=x.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {},
  parameters: {
    docs: {
      description: {
        story: 'Main game page with default settings.'
      }
    }
  }
}`,...(P=(A=x.parameters)==null?void 0:A.docs)==null?void 0:P.source}}};var W,L,G;S.parameters={...S.parameters,docs:{...(W=S.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {},
  parameters: {
    backgrounds: {
      default: 'dark'
    },
    docs: {
      description: {
        story: 'Main game page in dark theme.'
      }
    }
  }
}`,...(G=(L=S.parameters)==null?void 0:L.docs)==null?void 0:G.source}}};const ce=["Default","DarkTheme"];export{S as DarkTheme,x as Default,ce as __namedExportsOrder,ne as default};
